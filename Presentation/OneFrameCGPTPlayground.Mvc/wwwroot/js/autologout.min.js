var autoLogoutListener=function(){function n(){window.location.href=logoutUrl}function t(){var o,t;o=r-$.now(),(t=$("#auto-logout-dialog-progress")).attr("aria-valuenow",o/c*100),t.css("width",t.attr("aria-valuenow")+"%"),$.now()>r&&n()}function a(){clearTimeout(e),localStorage.setItem("AUTO_LOGOUT_LAST_ACTIVITY_TIME",$.now()),d()}var e=null,u=null,i=6e5,c=3e4,l=0,r=0,s=!1,T=document.title,g=!0,O=async function(){var o=$("#auto-logout-dialog");o.hasClass("show")||(o.modal("show"),document.title=L("AutoLogoutDocumentTitle"),u=window.setInterval(t,300))},d=function(){var o=parseInt(localStorage.getItem("AUTO_LOGOUT_LAST_ACTIVITY_TIME"));l=new Date(o).setMilliseconds(i),r=new Date(l).setMilliseconds(c),$.now()>l&&(s||O()),e=setTimeout(d,2e3)};return{init:function(){var o,t,e;o=localStorage.getItem("AUTO_LOGOUT_IDLE_TIMEOUT"),t=localStorage.getItem("AUTO_LOGOUT_DIALOG_TIMEOUT"),e=localStorage.getItem("AUTO_LOGOUT_DIALOG_ENABLE"),g&&(NullControl(o)||NullControl(t)||NullControl(e)?Common.Ajax("GET","/configurations/auto-logout",null,"json",function(o){i=o.identityAutoLogoutIdleTimeout,c=o.identityAutoLogoutDialogTimeout,g=o.identityAutoLogoutIsEnabled,localStorage.setItem("AUTO_LOGOUT_IDLE_TIMEOUT",i),localStorage.setItem("AUTO_LOGOUT_DIALOG_TIMEOUT",c),localStorage.setItem("AUTO_LOGOUT_DIALOG_ENABLE",g)},null,!1,!1):(i=o,c=t,g=Boolean(e))),g&&($("body").on("load scroll mousemove dblclick contextmenu click keypress pageshow resize focus drag copy cut paste",function(){s||a()}),a());var l=$("#auto-logout-dialog");l.find("#logout").click(function(o){s=!1,n()}),l.find("#stayLoggedIn").click(function(o){s=!1,$(this).data("bs.modal",null),clearInterval(u),a(),document.title=T,l.modal("hide")}),l.on("show.bs.modal",function(){s=!0})}}}();$(document).ready(function(){autoLogoutListener.init()});