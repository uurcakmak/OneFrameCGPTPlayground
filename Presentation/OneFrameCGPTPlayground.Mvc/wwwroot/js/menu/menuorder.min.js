"use strict";var tree=$("#tree"),KTMenuOrderGeneral=function(){function e(e){r.addEventListener("click",function(e){e.preventDefault(),ConfirmBox(function(){$(r).addClass("disabled").attr("disabled",!0),$(r).attr("data-kt-indicator","on");var e=function(e){for(var r=[],n=0;n<e.length;n++){var t=e[n];r.push({id:parseInt(t.id),parentId:null,orderId:n}),0<t.children.length&&(t=d(t.id,t.children),r=$.merge(r,t))}return r}($("#tree").jstree(!0).get_json());Common.Ajax("POST","/menus/order",{menuList:e})})})}var r,d=function(e,r){for(var n=[],t=0;t<r.length;t++){var i=r[t],a={id:parseInt(i.id),parentId:parseInt(e),orderId:t};n.push(a),0<i.children.length&&(i=d(i.id,i.children),n=$.merge(n,i))}return n};return{init:function(){r=document.querySelector("#menuOrderSaveButton"),Common.Ajax("GET","/menus/tree",null,null,function(e){Array.isArray(e)&&(tree.jstree(!0).settings.core.data=e,tree.jstree(!0).refresh(!1,!0)),Common.DisplaySuccess(e)}),e()}}}();setMenuTree(!0,"la la-circle-o text-warning"),KTUtil.onDOMContentLoaded(function(){KTMenuOrderGeneral.init()});