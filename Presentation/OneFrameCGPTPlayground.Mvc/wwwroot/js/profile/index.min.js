var FileUploadSample={init:function(){Common.Ajax("GET","/configurations/file-uploader-options",null,"json",function(e){getOptionsData(e)}),closeModal()}};function getOptionsData(e){var o=null,i="",n=parseInt(document.getElementById("jsProfileInfo").getAttribute("data-size"));e.Result.init=function(){this.on("addedfile",function(e){o&&this.removeFile(o),o=e;let t=new FileReader;t.onload=function(e){i=e.target.result},t.readAsDataURL(e)});var t=this;$("#fileUploadButton").click(function(e){0===t.files.length&&showNotification(L("FileDoesNotExist"),"Warning"),t.files[0].size>n?showNotification(L("FileSize"),"Warning"):(e.preventDefault(),t.processQueue())}),this.on("sending",function(e,t,o){o.append("profilePhotoBase64",i)}),this.on("success",function(e,t){t&&(hideModal(),clearModal(),setProfilPhoto(i))})},e.Result.accept=function(e,t){e.type.includes("image")?t():t("Error! Files of this type are not accepted")},FileUpload("#oneframe_file_upload",e.Result)}function clearModal(){RemoveFiles()}function hideModal(){$("#kt_modal_oneframe_file_upload").modal("hide")}function closeModal(){$("#kt_modal_oneframe_file_upload").on("hidden.bs.modal",function(){RemoveFiles()})}function setProfilPhoto(e){$("#profile_photo").attr("src",e),$(".profile_photo").css("background-image","url("+e+")"),localStorage.setItem("PROFILE_PHOTO",e),getLayoutProfilePhoto(e)}$(".deleteAvatar").click(function(){Common.Ajax("POST","/profiles/delete-profile-photo"),setProfilPhoto(document.getElementById("jsProfileInfo").getAttribute("data-default"))});var KTProfileEditGeneral=function(){var t,e,o;return{init:function(){t=document.querySelector("#ProfileEditForm"),e=document.querySelector("#kt_profile_edit_submit"),o=FormValidation.formValidation(t,{fields:{Name:{validators:{notEmpty:ValidationMessages.notEmpty(L("Name")),stringLength:ValidationMessages.stringLength(2)}},Surname:{validators:{notEmpty:ValidationMessages.notEmpty(L("Surname")),stringLength:ValidationMessages.stringLength(2)}},Email:{validators:{notEmpty:ValidationMessages.notEmpty(L("Email")),emailAddress:ValidationMessages.emailValidation()}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row"})}}),e.addEventListener("click",function(e){e.preventDefault(),o.validate().then(function(e){"Valid"===e&&Common.Ajax($(t).attr("method"),$(t).attr("action"),$(t).serializeArray(),null,function(){window.location.reload()})})})}}}();KTUtil.onDOMContentLoaded(function(){FileUploadSample.init(),KTProfileEditGeneral.init()});