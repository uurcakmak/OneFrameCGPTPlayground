"use strict";var roleList=$("#roleList"),KTRoleClaimGeneral=function(){var e,t,o,i,r,l=[];return{init:function(){e=document.querySelector("#kt_create_account_stepper"),t=e.querySelector("#kt_create_account_form"),o=e.querySelector('[data-kt-stepper-action="submit"]'),i=e.querySelector('[data-kt-stepper-action="next"]'),(r=new KTStepper(e)).on("kt.stepper.changed",function(e){o.classList.remove("d-inline-block"),o.classList.remove("d-none"),i.classList.remove("d-none")}),r.on("kt.stepper.next",function(t){var e=l[t.getCurrentStepIndex()-1];e?e.validate().then(function(e){"Valid"===e&&(t.goNext(),KTUtil.scrollTop())}):(t.goNext(),KTUtil.scrollTop()),$("#selectedRol").html($("#roleList").val())}),r.on("kt.stepper.previous",function(e){e.goPrevious(),KTUtil.scrollTop()}),l.push(FormValidation.formValidation(t,{fields:{roleList:{validators:{notEmpty:{message:L("RoleRequired")}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}})),o.addEventListener("click",function(t){l[0].validate().then(function(e){"Valid"===e?(t.preventDefault(),o.disabled=!0,o.setAttribute("data-kt-indicator","on"),setTimeout(function(){o.removeAttribute("data-kt-indicator"),o.disabled=!1,r.goNext()},2e3),ConfirmBox(function(){var e=$("#tree").jstree(!0).get_selected(),e={name:roleList.val(),selectedRoleClaimList:e};Common.Ajax("POST","/roles/role-claims",e)}),listChange(roleList,"/roles/role-claims/")):InfoBox(L("WizardValidationMultipleError"))})})}}}(),tree=$("#tree");setTree(),listChange(roleList,"/roles/role-claims/"),KTUtil.onDOMContentLoaded(function(){KTRoleClaimGeneral.init()});