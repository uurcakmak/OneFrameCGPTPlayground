"use strict";var userList=$("#userList"),KTUserClaimGeneral=function(){var e,t,r,i,s,n=[];return{init:function(){e=document.querySelector("#kt_create_account_stepper"),t=e.querySelector("#kt_create_account_form"),r=e.querySelector('[data-kt-stepper-action="submit"]'),i=e.querySelector('[data-kt-stepper-action="next"]'),(s=new KTStepper(e)).on("kt.stepper.changed",function(e){r.classList.remove("d-inline-block"),r.classList.remove("d-none"),i.classList.remove("d-none")}),s.on("kt.stepper.next",function(t){var e=n[t.getCurrentStepIndex()-1];e?e.validate().then(function(e){"Valid"===e&&(t.goNext(),KTUtil.scrollTop())}):(t.goNext(),KTUtil.scrollTop()),$("#selectedUser").html($("#userList").val())}),s.on("kt.stepper.previous",function(e){e.goPrevious(),KTUtil.scrollTop()}),n.push(FormValidation.formValidation(t,{fields:{userList:{validators:{notEmpty:{message:L("UserRequired")}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}})),r.addEventListener("click",function(t){n[0].validate().then(function(e){"Valid"===e?(t.preventDefault(),r.disabled=!0,r.setAttribute("data-kt-indicator","on"),setTimeout(function(){r.removeAttribute("data-kt-indicator"),r.disabled=!1,s.goNext()},2e3),ConfirmBox(function(){var e=$("#tree").jstree(!0).get_selected(),e={name:userList.val(),selectedUserClaimList:e};Common.Ajax("POST","/users/user-claims",e)}),listChange(userList,"/users/user-claims/")):InfoBox(L("WizardValidationMultipleError"))})})}}}(),tree=$("#tree");setTree(),listChange(userList,"/users/user-claims/"),KTUtil.onDOMContentLoaded(function(){KTUserClaimGeneral.init()});