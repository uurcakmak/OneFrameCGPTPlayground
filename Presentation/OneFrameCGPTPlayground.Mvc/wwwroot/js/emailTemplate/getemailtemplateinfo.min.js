"use strict";var KTEditEmailTemplateGeneral=function(){function t(){for(var e=!1,t=$.find(".multipleEmail"),a=0;a<t.length;a++){var i=t[a];if(NullControl(i.value))e=!0;else if(!1===MultipleEmailRegexWithComma(i.value)){e=!1;break}}return e}var a,e,i=document.getElementById("jsEmailTemplateInfo").getAttribute("data-default-language");return{init:function(){a=document.querySelector("#emailTemplateEditForm"),e=document.querySelector("#emailTemplateSaveButton"),tinymce.remove(),tinymce.init({selector:".editor",mode:"exact",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table image paste imagetools wordcount"],paste_data_images:!0,file_picker_types:"file image media",toolbar:"language insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",images_upload_handler:function(e,t,a){t("data:"+e.blob().type+";base64,"+e.base64())},language:i}),$(".multipleEmail").on("change",function(){t()||InfoBox(L("MultipleEmailCheck"))}),$("#emailTemplateSendEmailButton").click(function(e){e.preventDefault(),tinyMCE.triggerSave(),DialogBox(L("SendTryEmailTitle"),"email",L("EmailPlaceHolder"),L("EmailValidationMessage"),L("SendEmail"),function(e){var t=e,a=$(".tab-content .active").find('input[name^="Translations"]')[0].name.split(".")[0],e=$('input[name="'+a+'.Subject"]').val(),a=$('textarea[name="'+a+'.EmailContent"]').val();Common.Ajax("POST","/email-templates/send-email",{To:t,Subject:e,Content:a})})}),e.addEventListener("click",function(e){e.preventDefault(),t()?(tinymce.triggerSave(),Common.Ajax($(a).attr("method"),$(a).attr("action"),$(a).serializeArray())):InfoBox(L("MultipleEmailCheck"))})}}}();KTUtil.onDOMContentLoaded(function(){KTEditEmailTemplateGeneral.init()});